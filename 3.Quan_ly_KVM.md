# 1.Quản lý KVM bằng giao diện với virt-manager

- **Virt-manager** là ứng dụng có giao diện đồ họa cho người dùng để quản lý các máy ảo thông qua các API của libvirt.
- Nó có thể quản lý các máy ảo KVM, Xen và LXC. Nó có thể hiển thị thông tin của các máy ảo, mạng ảo, interface… Tạo, xóa, bật, tắt và quản lý máy ảo, mạng áo thông quan giao diện đồ họa.
- Cài đặt gói `virt-manager`

# 2.Quản lý KVM bằng Command Line với virsh và virt

### Lệnh virsh

- Cấu trúc câu lệnh: `virsh <option> [command] [domain] [ARG]...`


| Command | Usage
| ------- | ------------
| virsh list | Liệt kê các VM đang hoạt động
| virsh list --all | Liệt kê tất cả các VM
| virsh start [VM] | Bật VM
| virsh autostart [VM] | Khởi động VM cùng hệ thống
| virsh shutdown [VM] | Tắt VM
| virsh destroy [VM] | Tắt VM ngay lập tức
| virsh console [hostname] | Console đến một máy ảo
| domid [hostname/ID] | Xem ID của VM
| dominfo [hostname/ID] | Xem thông tin của VM
| domname [ID] | Xem tên VM
| domstate [hostname/ID] | Xem hostname của host1
| domuuid [hostname/ID] | Xem UUID
| setmaxmem [domain] [kbps] | Set số lượng RAM tối đa
| setmem [domain] [kbps] |Set ram
| attach device | Attach thiết bị từ một file truyền vào
| attach-disk | Attach một thiết bị lưu trữ
| attach-interface | Attach một giao diện mạng


### Lệnh virt

- Bộ câu lệnh virt gồm rất nhiều câu lệnh để quản lý máy ảo có hỗ trợ quản lý KVM như: virt-install (cài đặt máy ảo), virt-viewer (console tới máy ảo), virt-log (đọc log của máy ảo), virt-xml (dùng để sửa các cấu hình trong file xml), virt-edit (sửa cấu hình máy ảo),…

- Tạo máy ảo từ file iso

`virt-install 
--name ubuntu18.04-1 	//tên VM
--ram 2048	//Dung lượng ram cung cấp cho VM 	
--disk path=/var/lib/libvirt/images/ubuntu1.img,size=10 	//nơi lưu trữ máy ảo	
--vcpus 2 	//Số lượng CPU ảo cung cấp
--network bridge=virbr0 	//Card mạng cho VM
--graphics vnc 	//cài đặt hệ điều hành với giao diện bằng vnc
--console pty,target_type=serial 	//khai báo loại CLI
--cdrom=/home/lamth/Downloads/ubuntu-18.04.3-desktop-amd64.iso	//đường dẫn iso`

- Tạo máy ảo từ file images dựng sẵn

`virt-install 
  --name template 
  --ram 512 
  --vcpus 1 
  --disk path=/var/kvm/images/template.img --import –force	//đường dẫn đến file img`
  
-  Biểu diễn console đồ họa một máy ảo

`virt-viewer [hostname]`

